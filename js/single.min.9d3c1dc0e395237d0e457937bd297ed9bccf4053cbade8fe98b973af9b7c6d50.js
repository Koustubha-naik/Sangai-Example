document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".toc-sidebar"),t=document.querySelector(".toc-title");e&&t&&t.addEventListener("click",()=>{e.classList.toggle("closed")}),document.querySelectorAll(".toc-content a").forEach(e=>{const t=e.getAttribute("href");if(!t||!t.startsWith("#"))return;e.addEventListener("click",e=>{e.preventDefault();const n=document.querySelector(t);if(!n)return;window.scrollTo({top:n.offsetTop-40,behavior:"smooth"})})});const n=Array.from(document.querySelectorAll("h1, h2, h3, h4, h5")).filter(e=>e.id),s=document.querySelectorAll(".toc-content a"),o=e=>{s.forEach(t=>{t.classList.toggle("active",t.getAttribute("href")===`#${e}`)})},i=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&o(e.target.id)})},{rootMargin:"-40% 0px -50% 0px",threshold:0});n.forEach(e=>i.observe(e));const a=document.querySelectorAll(".single-content video, .single-content iframe");a.forEach(e=>{e.addEventListener("fullscreenchange",()=>{if(!document.fullscreenElement){screen.orientation.unlock&&screen.orientation.unlock();return}const t=e.videoWidth||16,n=e.videoHeight||9,s=t/n;s>1.2&&screen.orientation.lock&&screen.orientation.lock("landscape").catch(()=>{})})})})